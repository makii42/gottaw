box: golang
build:
  steps:
    - setup-go-workspace:
      package-dir:  github.com/makii42/gottaw
    - script:
        name: set up build environment and tools
        code: |
          go get github.com/golang/mock/gomock
          go get github.com/golang/mock/mockgen
          go get github.com/Masterminds/glide
    - script:
        name: install code deps
        code: |
          glide i -v
    - script:
        name: generate code
        code: |
          go generate $(glide novendor)
    - script:
        name: go build
        code: |
          go build .
    - script:
        name: go test
        code: |
          go test $(glide novendor)
